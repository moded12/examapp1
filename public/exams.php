<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† - Ø¨Ù†Ùƒ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
  <style>
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:'Tajawal',system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;background:#0f172a;color:#e5e7eb}
    body{min-height:100vh;display:flex;flex-direction:column}
    a{text-decoration:none;color:inherit}
    button{font-family:inherit}
    .site-hd{background:#020617;color:#e5e7eb;padding:16px 0;box-shadow:0 1px 0 rgba(15,23,42,.6)}
    .container{max-width:1100px;margin:0 auto;padding:0 1.5rem}
    .site-title{font-weight:800;font-size:1.4rem;display:flex;align-items:center;gap:8px}
    .site-title span{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:999px;background:radial-gradient(circle at 30% 20%,#f97316,#b91c1c)}
    main{flex:1;padding:24px 0}
    .row-btn{width:100%;padding:16px 16px;background:#0b1120;color:#e5e7eb;border-radius:999px;border:1px solid rgba(148,163,184,.7);display:flex;align-items:center;justify-content:space-between;cursor:pointer;transition:.15s all ease;box-shadow:0 8px 26px rgba(15,23,42,.8)}
    .row-btn:hover{border-color:#60a5fa;box-shadow:0 12px 36px rgba(37,99,235,.60);transform:translateY(-1px)}
    .row-btn .title{font-weight:800;font-size:1.02rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-left:8px}
    .row-btn .meta{font-size:.8rem;opacity:.95}

    body.ov-open{overflow:hidden}
    .ov{position:fixed;inset:0;background:rgba(0,0,0,.65);display:none;align-items:center;justify-content:center;z-index:1000}
    .ov.show{display:flex}
    .ov .box{background:#0b1220;color:#e5e7eb;width:min(1200px,96vw);height:min(92svh,940px);border-radius:18px;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 24px 60px rgba(0,0,0,.40),0 0 0 1px rgba(255,255,255,.06) inset;outline:1px solid rgba(255,255,255,.06);}
    .ov header{padding:10px 14px;border-bottom:1px solid #1f2937;display:flex;align-items:center;justify-content:space-between;background:radial-gradient(circle at 0 0,rgba(96,165,250,.24),transparent 50%);}
    .ov header h3{margin:0;font-size:.98rem;font-weight:700;max-width:420px}
    .ov header .btn{background:#111827;color:#e5e7eb;border:1px solid #374151;border-radius:999px;padding:6px 11px;font-size:.78rem;cursor:pointer;display:inline-flex;align-items:center;gap:4px}
    .ov header .btn:hover{background:#1f2937;border-color:#4b5563}
    .ov header .btn.close{background:#b91c1c;border-color:#ef4444}
    .ov header .btn.close:hover{background:#dc2626}
    .ov .body{flex:1;display:flex;min-height:0;min-width:0}
    .ov .body.no-side .viewer{flex:1}
    .ov .viewer{position:relative;background:#0b1220;display:flex;align-items:center;justify-content:center;padding:0;min-width:0;min-height:0;}
    .ov .viewer iframe,.ov .viewer embed{width:100%;height:100%;border:0;background:white}
    .ov .viewer img{width:100%;height:100%;object-fit:contain;background:#0b1220}
    .ov .side{border-left:1px solid #1f2a3a;overflow:auto;background:#0b1220}
    .ov .side.hidden{display:none}
    .ov .file-item{padding:12px;border-bottom:1px solid #1f2a3a;cursor:pointer;display:flex;align-items:center;gap:8px}
    .ov .file-item:hover{background:#101a2e}
    .wm{position:absolute;inset:0;pointer-events:none;z-index:9;opacity:.22;background-repeat:repeat;background-size:300px 240px;}
    .loading{color:#9ca3af;font-size:.9rem}

    footer.site-ft{padding:14px 0 18px;border-top:1px solid rgba(148,163,184,.30);background:#020617;color:#9ca3af;font-size:.8rem;margin-top:20px}
    .flex{display:flex}
    .items-center{align-items:center}
    .gap-2{gap:.5rem}
    .gap-3{gap:.75rem}
    .min-w-0{min-width:0}
    .truncate{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .text-center{text-align:center}
    .text-sm{font-size:.875rem}
    .mt-2{margin-top:.5rem}
    .mt-8{margin-top:2rem}
    .mb-6{margin-bottom:1.5rem}
    .space-y-3 > * + *{margin-top:.75rem}
    .mt-1{margin-top:.25rem}
    .mb-3{margin-bottom:.75rem}
    .mb-4{margin-bottom:1rem}
    .text-slate-300{color:#e5e7eb}
    .text-slate-400{color:#9ca3af}
    .text-slate-600{color:#4b5563}
    .bg-blue-600{background:#2563eb}
    .text-white{color:#fff}
    .rounded{border-radius:.5rem}
    .px-4{padding-left:1rem;padding-right:1rem}
    .py-2{padding-top:.5rem;padding-bottom:.5rem}
    .mt-3{margin-top:.75rem}
  </style>
</head>
<body>
  <header class="site-hd">
    <div class="container mx-auto px-6 flex items-center justify-between">
      <div class="site-title">
        <span>OM</span>
        <div>Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ù…Ù†Ù‡Ø§Ø¬ Ø³Ù„Ø·Ù†Ø© Ø¹Ù…Ø§Ù†</div>
      </div>
      <a href="subjects.html" style="font-size:.85rem;color:#cbd5f5">Ø§Ù„Ù…ÙˆØ§Ø¯</a>
    </div>
  </header>

  <main class="container mx-auto px-6">
    <div class="text-center mb-6">
      <h2 class="text-3xl md:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">
        Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†
      </h2>
      <div id="hdr" class="mt-2 text-slate-700 dark:text-slate-300"></div>
      <p class="text-sm text-slate-600 dark:text-slate-400 mt-1">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ø²Ø± Ù„ÙØªØ­ Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª.</p>
    </div>

    <div class="ad-safe-gap"></div>

    <div id="list" class="space-y-3"></div>
    <div id="msg" class="mt-8 text-center text-slate-600 dark:text-slate-400"></div>
  </main>

  <footer class="site-ft">
    <div class="container mx-auto px-6 text-center text-sm">
      Â© <span id="yr"></span> Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© | Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ù…Ù†Ù‡Ø§Ø¬ Ø³Ù„Ø·Ù†Ø© Ø¹Ù…Ø§Ù†
    </div>
  </footer>

  <div id="ov" class="ov" aria-modal="true" role="dialog">
    <div class="box">
      <header>
        <div class="flex items-center gap-3 min-w-0">
          <button class="btn close" onclick="closeOv()">Ø¥ØºÙ„Ø§Ù‚</button>
          <h3 id="ov_title" class="truncate" title=""></h3>
        </div>
        <div class="flex items-center gap-2">
          <button id="openTab" class="btn" type="button" title="ÙØªØ­ ÙÙŠ ØªØ¨ÙˆÙŠØ¨">â†—ï¸ ÙØªØ­</button>
          <button id="downloadFile" class="btn" type="button" title="ØªÙ†Ø²ÙŠÙ„">â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„</button>
          <button id="toggleSide" class="btn" type="button" title="Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù„ÙØ§Øª">ğŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª</button>
        </div>
      </header>
      <div id="ovBody" class="body no-side">
        <div id="viewer" class="viewer">
          <div id="wm" class="wm" aria-hidden="true"></div>
          Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ù
        </div>
        <div id="filesSide" class="side hidden"></div>
      </div>
    </div>
  </div>

  <script>
  const pathName = location.pathname;
  const marker = '/student/';
  const baseStudent = pathName.includes(marker)
    ? pathName.slice(0, pathName.indexOf(marker) + marker.length)
    : pathName.replace(/[^/]*$/, '');
  const HOME_URL = new URL(baseStudent + '../', location.origin).href;

  document.getElementById('yr').textContent = new Date().getFullYear();

  (function initTheme(){
    const saved = localStorage.getItem('theme');
    if(saved === 'dark'){
      document.documentElement.classList.add('dark');
    }
  })();

  const urlParams = new URLSearchParams(location.search);
  const grade_id = +urlParams.get('grade_id') || null;
  const subject_id = +urlParams.get('subject_id') || null;
  const term_no = +urlParams.get('term_no') || null;

  const DEFAULT_WM = 'Ø§ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ù…Ù†Ù‡Ø§Ø¬ÙŠ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©';

  function absUrl(p){
    try{
      if(!p) return '';
      return new URL(p, HOME_URL).href;
    }catch(_e){
      return p;
    }
  }

  function iconOf(mime,path){
    const lower = (mime || '').toLowerCase();
    const p = (path || '').toLowerCase();
    if(lower.includes('pdf') || /\.pdf(\?|$)/.test(p)) return 'ğŸ“„';
    if(lower.includes('image') || /\.(png|jpg|jpeg|webp|gif)(\?|$)/.test(p)) return 'ğŸ–¼ï¸';
    if(/\.(doc|docx)(\?|$)/.test(p)) return 'ğŸ“˜';
    if(/\.(ppt|pptx)(\?|$)/.test(p)) return 'ğŸ“Š';
    if(/\.(xls|xlsx)(\?|$)/.test(p)) return 'ğŸ“—';
    if(/drive\.google\.com/.test(p)) return 'ğŸ”—';
    if(/^https?:\/\//.test(p)) return 'ğŸŒ';
    return 'ğŸ“';
  }

  function isPDF(mime, path){
    const m = (mime || '').toLowerCase();
    const p = (path || '').toLowerCase();
    return m.includes('pdf') || /\.pdf(\?|$)/.test(p);
  }

  function applyWatermark(text){
    const wmEl = document.getElementById('wm');
    const t = (text || '').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    const svg = `<svg xmlns="http://www.w3.org/2000/svg" width="300" height="240" viewBox="0 0 300 240">
      <defs>
        <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0%" stop-color="#ffffff" stop-opacity="0.4"/>
          <stop offset="100%" stop-color="#9ca3af" stop-opacity="0.2"/>
        </linearGradient>
      </defs>
      <g transform="translate(150 120) rotate(-30)">
        <text text-anchor="middle" fill="url(#g)" font-size="24" font-family="Tajawal, system-ui" opacity="0.9">
          ${t}
        </text>
      </g>
    </svg>`;
    wmEl.style.backgroundImage = `url("data:image/svg+xml,${encodeURIComponent(svg)}")`;
  }

  async function apiGet(name, params = {}){
    const q = new URLSearchParams(params);
    const url = new URL('../exams.php', baseStudent);
    if (q.toString()) url.search = q.toString();
    const res = await fetch(url, {credentials:'omit', cache:'no-cache'});
    if(!res.ok) throw new Error('API failed');
    return res.json();
  }

  function openOv(title, files){
    window.__files = files || [];
    const ov = document.getElementById('ov');
    const bodyEl = document.getElementById('ovBody');
    const side = document.getElementById('filesSide');
    document.getElementById('ov_title').textContent = title || '';
    side.classList.add('hidden');
    bodyEl.classList.add('no-side');
    ov.classList.add('show');
    document.body.classList.add('ov-open');
    if (window.__files.length) {
      renderViewer(window.__files[0]);
      renderSide(window.__files);
    } else {
      document.getElementById('viewer').innerHTML = '<div class="text-slate-300">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ù</div>';
    }
    applyWatermark(DEFAULT_WM);
  }

  function closeOv(){
    if(window.currentBlobUrl){
      URL.revokeObjectURL(window.currentBlobUrl);
      window.currentBlobUrl = '';
    }
    window.currentFileUrl = '';
    document.getElementById('ov').classList.remove('show');
    document.body.classList.remove('ov-open');
  }

  window.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ closeOv(); } });

  document.getElementById('toggleSide').addEventListener('click', ()=>{
    const side = document.getElementById('filesSide');
    const bodyEl = document.getElementById('ovBody');
    const show = side.classList.contains('hidden');
    side.classList.toggle('hidden', !show);
    bodyEl.classList.toggle('no-side', !show);
  });

  // =========================
  // renderViewer (Ù…ÙØ¹Ø¯Ù‘ÙÙ„Ø©)
  // =========================
  async function renderViewer(file){
    const v = document.getElementById('viewer');
    if(!file){
      v.innerHTML = '<div class="text-slate-300">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ù</div>';
      return;
    }

    const mime = (file.mime || '').toLowerCase();
    const raw  = (file.path || file.file_path || '').trim();
    const path = absUrl(raw);
    window.currentFileUrl = path;

    if(window.currentBlobUrl){
      URL.revokeObjectURL(window.currentBlobUrl);
      window.currentBlobUrl = '';
    }

    const wmEl = document.getElementById('wm');

    // ØµÙˆØ±: Ù†Ø¹Ø±Ø¶Ù‡Ø§ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¯ÙˆÙ† ØªØ¹Ù‚ÙŠØ¯
    const isImage = mime.includes('image') || /\.(png|jpg|jpeg|webp|gif)(\?|$)/i.test(path);
    if (isImage){
      v.innerHTML = '';
      const img = document.createElement('img');
      img.src = path;
      img.alt = '';
      v.appendChild(img);
      v.appendChild(wmEl);
      document.getElementById('openTab').disabled = false;
      document.getElementById('downloadFile').disabled = false;
      return;
    }

    // Ù„Ø£ÙŠ Ù†ÙˆØ¹ Ø¢Ø®Ø± (PDF, Docs, Google Drive, ...):
    // Ù†Ø­Ø§ÙˆÙ„ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø§Ù„Ø¹Ø±Ø¶ Ø¯Ø§Ø®Ù„ iframe Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… blob Ø£Ùˆ Ù…Ø¨Ø§Ø´Ø±Ø©
    v.innerHTML = '';
    const loading = document.createElement('div');
    loading.className = 'loading';
    loading.textContent = 'Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù';
    v.appendChild(loading);

    let ok = false;
    let blobUrl = '';
    let finalUrl = path;

    try{
      let url = path;
      if (location.protocol === 'https:' && url.startsWith('http:')) {
        url = url.replace(/^http:/,'https:');
      }
      finalUrl = url;
      window.currentFileUrl = finalUrl;

      // Ù…Ø­Ø§ÙˆÙ„Ø© fetch ÙÙ‚Ø· Ù„Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªÙŠ ØªØ³Ù…Ø­ Ø¹Ø§Ø¯Ø© Ø¨Ø°Ù„Ùƒ (Ù†ÙØ³ Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ† Ø£Ùˆ Ø¨Ø¯ÙˆÙ† CORS ÙˆØ§Ø¶Ø­)
      const sameOrigin = new URL(finalUrl, location.href).origin === location.origin;
      if (sameOrigin && !/drive\.google\.com/i.test(finalUrl)) {
        const res = await fetch(finalUrl, {credentials:'omit', cache:'no-cache'});
        if (res.ok){
          const ct  = (res.headers.get('content-type') || '').toLowerCase();
          const buf = await res.blob();
          const blob = new Blob([buf], {type: ct || 'application/octet-stream'});
          blobUrl = URL.createObjectURL(blob);
          window.currentBlobUrl = blobUrl;
          ok = true;
        }
      }
    }catch(_e){
      ok = false;
    }

    v.innerHTML = '';

    if (ok && blobUrl){
      // Ù†Ø¬Ø­Ù†Ø§ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ blob: Ù†Ø¹Ø±Ø¶Ù‡ Ø¯Ø§Ø®Ù„ iframe (Ù†ÙØ³ Ø§Ù„ØµÙØ­Ø©)
      const iframe = document.createElement('iframe');
      iframe.src = blobUrl + (isPDF(mime, finalUrl) ? '#toolbar=1&navpanes=0&view=FitH' : '');
      iframe.title = 'Ù…Ù„Ù';
      iframe.loading = 'eager';
      v.appendChild(iframe);
      v.appendChild(wmEl);
    } else {
      // Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ø¹Ø±Ø¶ Ø¯Ø§Ø®Ù„ÙŠÙ‘Ù‹Ø§ (ØºØ§Ù„Ø¨Ø§Ù‹ Ø±Ø§Ø¨Ø· Ø®Ø§Ø±Ø¬ÙŠ Ù…Ø«Ù„ Google Drive Ø£Ùˆ CORS)
      const isExternal = file.is_external || /^https?:\/\//i.test(finalUrl);

      v.innerHTML = `
        <div class="text-center text-slate-100 p-4">
          <p class="mb-3">ØªØ¹Ø°Ù‘Ø± Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ù Ù…Ø¨Ø§Ø´Ø±Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø©.</p>
          <p class="mb-4 text-sm text-slate-300">
            ${isExternal ? 'ÙŠØ¨Ø¯Ùˆ Ø£Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ ÙŠÙ…Ù†Ø¹ Ø§Ù„ØªØ¶Ù…ÙŠÙ† Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ (Ù…Ø«Ù„ Google Drive)ØŒ Ù„Ø°Ù„Ùƒ ÙŠØ¬Ø¨ ÙØªØ­Ù‡ ÙÙŠ ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯.' : 'ØªØ­Ù‚Ù‘Ù‚ Ù…Ù† Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù„Ù Ø£Ùˆ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§Ø¯Ù….'}
          </p>
          <a class="px-4 py-2 rounded bg-blue-600 text-white"
             href="${finalUrl}" target="_blank" rel="noopener">
            ÙØªØ­ ÙÙŠ ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯ (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ)
          </a>
        </div>
      `;
      v.appendChild(wmEl);
    }

    // Ø£Ø²Ø±Ø§Ø± Ø£Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
    const openBtn = document.getElementById('openTab');
    const dlBtn   = document.getElementById('downloadFile');
    openBtn.disabled = false;
    dlBtn.disabled   = false;
    openBtn.onclick  = ()=> window.open(window.currentFileUrl || finalUrl, '_blank', 'noopener');
    dlBtn.onclick    = ()=> window.open(window.currentFileUrl || finalUrl, '_blank');
  }

  function renderSide(files){
    const s = document.getElementById('filesSide');
    s.innerHTML = '';
    if(!files || !files.length){
      s.innerHTML = '<div class="p-4 text-slate-400">Ù„Ø§ Ù…Ø±ÙÙ‚Ø§Øª</div>';
      return;
    }
    files.forEach((f)=>{
      const pth = f.path || f.file_path || '';
      const d   = document.createElement('div');
      d.className = 'file-item';
      d.innerHTML = `<span>${iconOf(f.mime,pth)}</span><span class="truncate">${(pth.split('/').pop()||'Ù…Ù„Ù')}</span>`;
      d.addEventListener('click',()=> renderViewer(f));
      s.appendChild(d);
    });
  }

  async function loadExams(){
    if(!grade_id || !subject_id || !term_no){
      document.getElementById('msg').textContent='Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù†Ø§Ù‚ØµØ©.';
      return;
    }

    (async ()=>{
      const grades = await apiGet('get_grades');
      const gRow   = (grades.data || []).find(x=>+x.id===grade_id);

      const subs = await apiGet('get_subjects',{grade_id});
      const sRow = (subs.data || []).find(x=>+x.id===subject_id);

      const terms = await apiGet('get_terms');
      const tRow = (terms.data || []).find(x=>+x.term_no===term_no);

      const hdr = document.getElementById('hdr');
      hdr.textContent = `Ø§Ù„ØµÙ: ${gRow ? gRow.name_ar : grade_id} Â· Ø§Ù„Ù…Ø§Ø¯Ø©: ${sRow ? sRow.name_ar : subject_id} Â· Ø§Ù„ÙØµÙ„: ${tRow ? tRow.name_ar : term_no}`;
    })().catch(()=>{});

    const apiRes = await apiGet('list_exams', {grade_id,subject_id,term_no});
    if(!apiRes.ok){
      document.getElementById('msg').textContent='ØªØ¹Ø°Ù‘Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.';
      return;
    }
    const list = apiRes.data || [];
    const box  = document.getElementById('list');
    box.innerHTML = '';

    if(!list.length){
      document.getElementById('msg').textContent='Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ÙˆÙŠÙ† Ù…ØªØ§Ø­Ø©.';
      return;
    }

    list.forEach((ex)=>{
      const files = ex.files || [];
      const wrap = document.createElement('div');
      wrap.innerHTML = `
        <button class="row-btn" type="button">
          <span class="title">${ex.title}</span>
          <span class="meta">${files.length} Ù…Ù„Ù${ex.exam_date ? (' â€¢ ' + ex.exam_date) : ''}</span>
        </button>
      `;
      const btn = wrap.querySelector('button');
      btn.addEventListener('click',()=> openOv(ex.title, files));
      box.appendChild(wrap.firstElementChild);
    });
  }

  (async function init(){
    await loadExams();
  })();
  </script>
</body>
</html>